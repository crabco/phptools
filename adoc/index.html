<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Adoc</title>
<script language="javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<style type="text/css">
body,td,th {
    color:#525252;
    font-size: 14px;
}
body {
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
.dtrt {
    height: 28px;
    font-size: 14px;
    background-color: #D0DBE3;
    padding-top: 10px;
    padding-bottom: 5px;
    position: fixed;
    width:100%;
}
.dtr{
    font-size: 14px;
    padding: 10px;
    margin: 10px;
    overflow: hidden;
    margin-bottom: 40px;
}
.dtdl{
    margin: 40px 0 0 3%;
    width:22%;
    min-height: 100px;
    float: left;
    text-align: left;
    line-height: 25px;
    position: fixed;
}
.dtd{
    margin: 42px 0 0 25%;
    width: 60%;
    min-height: 500px;
    float: left;
    padding: 20px 0px 0px 20px;
    border-left: #eee 1px solid;
}
.dspan {
    font-size: 14px;
    margin-right:5px;
}
.dspanName{
    font-size: 12px;
    margin-left: 10px;
    display: inherit;
}
.dspanNames{
	color:#B3318B;
	font-weight: bold;
}
.dspanExp {
    color: #a2a2a2;
    font-size: 8px;
    display: inline-block;
}
.dbut {
    color: #D6DEF3;
    background-color: #2d59ce;
    padding-top: 5px;
    padding-right: 10px;
    padding-bottom: 5px;
    padding-left: 10px;
    border-radius: 4px;
    border: 1px solid #1e3c8c;
    font-size: 10px;
    cursor: pointer;
}
.dbut:hover{
    color: #F3F5FC;
    background-color: #3C66C8;
    border: 1px solid #4A72CC;
}
.cbut{
    color: #fff;
    background-color: #258e2c;
    padding-top: 5px;
    padding-right: 10px;
    padding-bottom: 5px;
    padding-left: 10px;
    border-radius: 4px;
    border: 1px solid #26a02f;
    font-size: 10px;
    cursor: pointer;
}
.cbut :hover{
    background-color:#42b34a;
}
.ebut {
    color: #fbfbfb;
    background-color: #5f5f5f;
    padding-top: 5px;
    padding-right: 10px;
    padding-bottom: 5px;
    padding-left: 10px;
    border-radius: 4px;
    border: 1px solid #565656;
    font-size: 10px;
    cursor: pointer;
}
.ebut:hover{
    color: #F3F5FC;
    background-color: #3C66C8;
    border: 1px solid #4A72CC;
}
.mk{
    background-color:#fff;
    border: #000 1px solid;
    max-width: 90%;
    max-height: 90%;
    min-width: 800px;
    min-height: 400px;
    display:inline-block;
    border-radius: 5px;
    margin-top: 50px;
    overflow-x: hidden;
    overflow-y: auto;
    padding: 5px;
}
input{
    min-width: 100px;
    width: 90%;
    padding:5px;
    border-radius: 3px;
    border: #5fca3a 1px solid;
}
textarea{
    min-width: 90%;
    min-height: 100px;
    padding:5px;
    border-radius: 3px;
    border: #5fca3a 1px solid;
}
select{
	padding:2px;
	border-radius: 3px;
    border: #5fca3a 1px solid;
}
.bgput:before{
    content:"PUT";
    background-color:#b3318b;
    border-radius: 3px;
    margin-right: 5px;
    padding: 1px 5px;
    color: #fff;
    width: 50px;
    font-size: 10px;
}
.bgpost:before{
    content:"POST";
    background-color:#364eca;
    border-radius: 3px;
    margin-right: 5px;
    padding: 1px 5px;
    color: #fff;
    width: 50px;
    font-size: 10px;
}
.bgget:before{
    content:"GET";
    background-color:#42b34a;
    border-radius: 3px;
    margin-right: 5px;
    padding: 1px 5px;
    color: #fff;
    width: 50px;
    font-size: 10px;
}
.bgdelete:before{
    content:"DELETE";
    background-color:#000;
    border-radius: 3px;
    margin-right: 5px;
    padding: 1px 5px;
    color: #fff;
    width: 50px;
    font-size: 10px;
}
.eve_table{
    border:#eee 1px solid;
    padding: 0px;
    border-collapse:collapse;
    margin-bottom: 20px;
}
.eve_table th{
    background-color:#f9f9f9;
    height:20px;
    font-size: 10px;
    font-weight: normal;
    #dad9d9;
    border: #f3f3f3 1px solid;
    color: #cecece;
}
.eve_table tr:nth-child(even){
    background-color:#f9f9f9;
}
.eve_table td{
    text-align: left;
    height:30px;
    font-size:10px;
    border: #f7f7f7 1px solid;
    padding-left: 5px;
    width: 30%;
}
.ApiName{
    color:#000;
    font-size:16px;
    margin-bottom: 5px;
    margin-top: 30px;
}
.ApiURL{
    font-size: 12px;
    background-color: #fffcea;
    width: 98%;
    padding: 9px;
    margin-bottom: 5px;
    display: block;
    color: #696969;
}
.ApiJson{
	font-size: 12px;
    color: #000;
    background-color: #eaffee;
    width: 98%;
    padding: 10px;
    margin-bottom: 5px;
    border: #a9e0b3 1px solid;
    border-radius: 5px;
}
.iedit{
    font-family: arial;
    cursor: pointer;
    font-size: 6px;
    border-radius: 2px;
    background-color: #e5f5e6;
    color: #FFFFFF;
    padding:0 1px;
    margin: 0 1px;
}
.iedit:before{
    content: "edit";
}
.iedit:hover{
    background-color: #258E2C;
}
.idel{
    font-family: arial;
    cursor: pointer;
    font-size: 6px;
    border-radius: 2px;
    background-color: #fff0f0;
    color: #FFFFFF;
    padding:0 3px;
    margin: 0 2px;
}
.idel:before{
    content: "del";
}
.idel:hover{
    background-color: #923333;
}
.ico_word{
    height: 18px;
    width: 18px;
    display: inline-block;
    cursor: pointer;
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPGSURBVDhPlVNNiBxFFJ6D4EnwELxEvGS6q6p/ZmZXCSseohchB3MQsslBiDvTf9XdM7Oz2cVsFDdBNBgUssmCBkSIm53pn+numZ7J7I5jSNj4s8EQgp6y4lz8IYLgSVASLF/N7saoINjweFVfv/pevfe+yjz4Zcu9h/PV5NGJWmf33nLv8b3l6D9toubvfrKSPrFvJt21TZHJYCcal+3WnOLE8wUnro65TXdkNjd/y+9gO7jru+PlmMpW9O6IRDH8p7HpfyjZrbelav89QtMOtpJVibZ63Mv2pQGh7TWJJj2OcU/sVl+pDS6r5c7iGI3KGVT84BHJ9E5LNJhHRrROqp8w5K4y5FwaGXZg7fZ/xyOsu4W7gMNeqq3/huz0ZoH61Yxq+QdUM3pHMqPTkglkut9CdocJJY+JZosJun8bFS+UkR58imibCZrP+H+x2KhjzZ/BRrCmOOErGdUMT8hWeFKYatxAxfpTgh4c5pkFoznKip1kkZcvuWkNuz0mGjEnugexB3Cx8TzSG9dzbnwsI1vBa9gKjgla45fs1MpbgnaxINDWj6MSrBaT3eTQwsKVh/K0+ZyghXexu8agb0NpalnKFoOlrN4Y5p1oOiPb0XFiNOayevgzdrrpvpnzu4jTSaXaVSbq3neq7o0rer2IissIiL6Sj16DW7bDnPXRY6jSHxAzuV2w/EpGps1Xid6YFa3ke1JZHSrGChYNb0Ge/ZwRu3shVw7HsNO5pjqJit30jDz3GROK/nHpyMUCqQx+wLR96y8iszGbNaIh9OAPXKof2aND/eU1Jlf6JWLHk2T66k8Qd0iu9A5jXvLLKy+IJU/DlQEjVvxlwb5P5M/CNDZJ7QrDZrxYMJclaPrXSIe+lMIzpHqZwdSWUKnxLEz1pkLDHKHJknR0nSEz2vg7UcnbJNNwwEo3Rn0xgikV1C4awRekOmCi5m/k7aCgUP8l1fImeBzvIwL8X0QIxAe9+lUyvIN85KoV7xdp5w6XgUi7d1Qr3M9xovmTPA67fSBq/oNI8zZFGDcfL1z7FD+ANO+kaKV3uRCR3b3H9xyXaPwm4UqnnQeItscv6OE3Im1BaW2WNaOhWKyf530TzQTEGYLKwcOt92j190U9+pYnhefBsN68nrPDrRthw5sGHQ25okW9CZlSRiofw7tKQcnRfeMHSQXKAc/juNKxGcHUmhSIolOK2XxdNqMTsD4H720Rm+FZbIGZ/lm+3zFs+dt4OMJlmpxTaHM+R6M3Mnm3/YxsBrbqxgdzNHxR/h/G4xU7nJSMyPkTx3tH3o8BsRMAAAAASUVORK5CYII=");
}
.ico_excl{
    height: 18px;
    width: 18px;
    display: inline-block;
    cursor: pointer;
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAOXSURBVDhPrZJrTJtVGMebmMUEsy1jgHOwZR+MmzN+gdVlTmHTsY2XocSN4dIs1KFx2S26DYaNAo45jLooi5dK7RjwAbNuKb341hIvQLqBymWzGGMTDYJc27690QvU/h/PewphOD/6JCfPufyfX/7POUfxv8fnttd2uUYGVZLkVw25flA1iAdVP7u6VGNjY6rJyckleWRkRDU8PMznTqdz5zxCoWgxfvBktbiJjENVJEfzj0fo/e4n2CzO1/8VAHiempoiu92ew0GufnfRtf4zdPLLVST2fUzlLffR4F8mpiaKRqM0MzNDsViMZ3kdCAQoFArR3NwcSZJEoiju5qCezgHBF/Ci1pqNMr0CesdLSCQSiEVjiEQiYEVLcjAYhN/vBwOCtQuz2fxsEuQYECTJhxrTFqibFdB1lidBsXtBzBEHMSfwer0YHx9fBP3imBaudp1CxY11+Nr5IdRNCgz8YeWwuwF3O1oATUxMLIJOXcoVZCemwfO8uE7cimOtqzDp+ZO7+jdIbkkGeTwe7shoNCZBNbpDgqFPwwpHMRubhWu8F003j+HO79/dAwqHw/x+ZIjb7Qb7AougDrFTCElxeD0+TE9PIxyaRSKeQDQyywBL70aey25kiKwdHR2FwWBIgiwWiyCT2Z/gryD37vP5eAuyAxmw4GTBzYKWfU60tbUlQaKlQ/C5gwhKTOwJI+xnToJxxEIJxCPs9eZzJBBHNPQ3Qr4YAt4wH+4JCUbD/GVXXFQLbfZPcON7HUwOPcy9Olj7GmG7/QU6nFfxzVALbHd0sA3qYfmpEaZbjWjv1uP6tzq0Wi/j9DtlSVDO4RRhZ8VKFL6dhhcupeFk6xZUXd+BWrEAGts2nBNzUG/fj2prPiqv5eFEsxLF76WioGY18l5fAaXqgSQot3yNsLcyE4WaLBRfyMRRrRL9v3ajqfMt6LrO4oLlANp7tagzluL2bz04rt2OotqHUFCVhT0Va/HUkYwkKO/lB/exTdp9JpN2nU2now07yNxzhT4VK8ngaCBN63PUfrORtF9pyHxLT8cv59Mzp1cz/Vraey6Tcssz8jlIeTAtd9+b66j4/Hoqqs6iF+sfpZJ3N1BZw2P0qlZJJ3Tb6ZXPsunwR5vpQP0GKr24ieuK69ZT4RtZyN6fupWDWGQ88vSKUmVJujr7+VT148JyPjYLKeqNwjKW71dv3LOM7aUkz4qWc52sf3jbyhKFQpH+D8aDRMi4uFkeAAAAAElFTkSuQmCC");
}
.ico_html{
    height: 18px;
    width: 18px;
    display: inline-block;
    cursor: pointer;
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAQMSURBVDhPVZRvbBN1GMfvhYkxUV9oeIMD5nZ37brJGA5wKNkU2dq117JlZWV/BDZFJn8X1GxKNEbRaXS8QDEQ3qAv9AUBXkCQyEQHo9vUwVjXbtMxer3rUUbX9nbr6Lrt69P2iOFJvmna3u+T5/k+398xYrnpmYDAJhW7AVJKDiPkqjzI1fmQa15AcMtKBF2FCNaSnPS9poD+M9EzRigOA8KbjXTGIDBjZvZpUeDuhew8ZPoxWJMPpW41Qk0luNdShvv7y6EdtmHmcwu0jzdiuu0VTLeugbp3FWI78iFaufk7Av8aI76U9UTAyg9PEl0S+IxsHCQrm5ZszUWkkYPazCHWxCPWTHrTiNjOPKiNeQjYuKmg3VDMoLT0sYCN/yNsfR7+xpcxePEchrp+ge/KJYx1X8Z4z2944B/BgjL+v4L/YuZIM9SaZQhY2QmyxMCkiro4HbHlwN+wHn92/w73LQ/cwyPoGRmHe3Qcs3i0FrUItENmTDuzIVWyg6NW7rk0yG/jT8TsLMQtL2Lg3M/oHbgJz9FPMHbQhbH36xE7ug/xE62IH89I+6oRsbfyMOMyIlDJXp20G55KgyQbf1h1cAhUF+DWD8fgHvTAd/xLKK5i3K1fi+jeEjK4BKqu2O6itFdxl4n85M+nIami9R/QNmeMHv7uszTopmcYHq8X3pFRJOaS+lCZSnT9iGjdUszWktkW/icdQyAr98Y05SJoXgFfx8E0qLevD9dJ7v5+xB8kdESmEmePIFafBc2ZGo07pmMYRhZ4RyqQipAZT6SRUhuc2FEGPynaRsa2b0JyuCcNmj31IYGWI1xtgN+a+6mOYRjFkVvmF1gtRJnxN5RgrH07RGcRgpuyqMvliLiyKHy5SHqupUHxb1sIlI0gZS9gYffrGDLbzBaRaVK4Yhn+oU25PT4MneyEbKaHU6DapVAPrMO86MPifBJah4tAOZAFNiFa2DodwzAhwcQGBN47lcoSjfTXrxfR+/cNeL/+ALffsSL2URUSF74HFhawODeL6UMVUOtzKdWsKlbyZh3DMGoNu0S28u6IgzZHXnm/aUf/tau4PuSlTN1APDmfHgnJBOb6zkPdU0QgDqLATvotOcU6hkld3Mepo0sqXViZLm8KdntnObwd72LgwhlowTuYu3wKM53boVKG1F0maE2FFBeDNFGxIlvHZCoVLLgKcJ9eGaH61bjrNCFIkQhsXYNIaykBViL2tgnRfeugtpBfDYXpjnwPU/2wJIFtiVYZuunGy2HqLN5MKd7zKqZ2bUC0dQO0917H7O4yqFtXUSdcOGRn++mzUz/+aF0pXfKkUmUskGysoFTmtEmOvDPKtrWSsm19WK4u6JIqsr+gDTv9FkOxtNH4rH6MimH+A/Zb87DPwEPVAAAAAElFTkSuQmCC");
}
</style>
</head>
<body>
    <div id="mask" style="position:fixed;background-color:rgba(0,0,0,0.5);width: 100%;height: 100%; z-index:1000;text-align:center;display:none;">
        <div id="mask_object" class="mk" style="display:none;">
            <div class="dtr">
                <span class="dspan">项目管理</span>
                <span class="dspan" style="float:right;" onclick="$(this).parent().parent().hide();$(this).parent().parent().parent().hide()"><span class="dbut">X</span></span>
            </div>
            <table width="100%">
                <tr>
                    <td width="30%">项目名称<input name="object_id_new" type="hidden" value="" /></td>
                    <td style="text-align:left;"><input name="object_name_new" placeholder="请输入项目名称，允许中文" /></td>
                </tr>
                <tr>
                    <td>接口地址</td>
                    <td style="text-align:left;"><input name="object_host_new" value="" placeholder="输入该项目的全局接口地址，http://"/></td>
                </tr>
                <tr>
                    <td>项目说明</td>
                    <td style="text-align:left;"><textarea name="object_exp_new" style="min-height:100px; width:90%"></textarea></td>
                </tr>
                <tr>
                    <td colspan="2" onclick="objhead_newtr()">全局Header设置+</td>
                </tr>
                <tbody id="ObjHeadTbody">
                <tr>
                    <td>&nbsp;</td>
                    <td style="text-align:left;">
                        <input style="width:30%" name="object_header_name_new" value="" placeholder="KeyName"/>
                        <input style="width:30%" name="object_header_value_new" value="" placeholder="KeyValue"/>
                    </td>
                </tr>
                </tbody>
                <tr>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <td colspan="2">
                        <span class="dbut" onclick="save_object()">+ 保存项目</span>
                        <span class="ebut" onclick="esc_object()">- 取消</span>
                    </td>
                </tr>
            </table>
        </div>

        <div id="mask_event" class="mk" style="display:none;">
            <div class="dtr">
                <span class="dspan">对象管理</span>
                <span class="dspan" style="float:right;" onclick="$(this).parent().parent().hide();$(this).parent().parent().parent().hide()"><span class="dbut">X</span></span>
            </div>
            <div style="margin-top:10px;">
                <table width="100%" >
                    <tr>
                        <td>元素名称</td>
                        <td>元素类型</td>
                        <td>默认长度</td>
                        <td>是否为空</td>
                    </tr>
                    <tbody id="EveTbody">
                    <tr>
                        <td><input name="eve_key" value="" style="min-width:90%;"/></td>
                        <td><input name="eve_type" value="" style="min-width:90%;"/></td>
                        <td><input name="eve_long" value="" style="min-width:90%;"/></td>
                        <td><input name="eve_empty" value="" style="min-width:90%;"/></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div style="padding:10px; cursor: pointer;" onclick="eve_newtr()">+增加一行</div>
            <div style="margin-top:10px;"></div>
            <div style="margin-top:10px;">
                <span class="dspan">
                    <span class="dbut">+ 保存</span>
                    <span class="ebut">- 取消</span>
                </span>
            </div>
            <div style="margin-top:10px;"></div>
        </div>
        
        <div id="mask_api" class="mk" style="width:60%;display: none;">
            <input name="new_api_id" value="" type="hidden"/>
            <div class="dtr">
                <span class="dspan">接口管理</span>
                <span class="dspan" style="float:right;" onclick="$(this).parent().parent().hide();$(this).parent().parent().parent().hide()"><span class="dbut">X</span></span>
            </div>
            <div class="ApiName">添加/修改接口</div>
            <table width="99%" class="eve_table">
                <tr>
                    <th colspan="4">基本信息</th>
                </tr>
                <tr>
                    <td style="text-align: center">接口名称</td>
                    <td colspan="3"><input name="new_apiname" value="" placeholder="接口名称可以中文" /></td>
                </tr>
                <tr>
                    <td style="text-align: center">接口地址</td>
                    <td colspan="3">
                        <input name="new_apiurl" value="" placeholder="如果加入http则跳过系统变量中的ApiHost" />
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center">提交方式</td>
                    <td colspan="3"><select name="new_apitype"><option>GET</option><option>PUT</option><option>POST</option><option>DELETE</option></select></td>
                </tr>
                <tr>
                    <td style="text-align: center">说明</td>
                    <td colspan="3"><textarea style="width:80%" name="new_apiexp"></textarea></td>
                </tr>
                <tr>
                    <th colspan="4" style="cursor:pointer;" onclick="head_newtr()">Header + </th>
                </tr>
                <tbody id="HeadTbody">
                <tr>
                    <td style="text-align: center"><input name="new_apiheader_name" value="" placeholder="KeyName" /></td>
                    <td><input name="new_apiheader_value" value="" placeholder="值" /></td>
                    <td><input name="new_apiheader_exp" value="" placeholder="说明" /></td>
                    <td><input name="new_apiheader_empty" type="checkbox" style="width:40px;min-width: 0px;" value="true"/></td>
                </tr>
                </tbody>
                <tr>
                    <th colspan="4" style="cursor:pointer;" onclick="requ_newtr()">Request + </th>
                </tr>
                <tbody id="RequTbody">
                <tr>
                    <td style="text-align: center;"><input name="new_apirequest_name" value="" placeholder="KeyName" /></td>
                    <td><input name="new_apirequest_value" value="" placeholder="值" /></td>
                    <td><input name="new_apirequest_exp" value="" placeholder="说明" /></td>
                    <td><input name="new_apirequest_empty" type="checkbox" style="width:40px;min-width: 0px;"/></td>
                </tr>
                </tbody>
                <tr>
                    <th colspan="4" style="cursor:pointer;" onclick="resp_newtr()">Response + </th>
                </tr>
                <tbody id="RespTbody">
	                <tr>
	                    <td style="text-align:left;" width="35%;">
                                <span name="left_int"></span>
                                <input name="new_apiresponse_left" type="hidden" value=""/>
                                <input name="new_apiresponse_name" style="width:50%;" value="" placeholder="KeyName" />&nbsp;
                                <span class="dspanExp" style="cursor: pointer;" onclick="resp_newchilds(this,'<')" title="向上移动层级">◀</span>
                                <span class="dspanExp" style="cursor: pointer;" onclick="resp_newchilds(this,'>')" title="向下移动层级">▶</span>
                            </td>
	                    <td width="30%;"><input name="new_apiresponse_value" value="" placeholder="值" /></td>
	                    <td width="30%;"><input name="new_apiresponse_exp" value="" placeholder="说明" /></td>
	                    <td width="5%;">
	                    	[<span class="dspanExp" style="cursor: pointer;" onclick="resp_newchilds(this,'+')" title="在后面增加一个同级元素">✚</span>
	                    	<span class="dspanExp" style="cursor: pointer;" onclick="resp_newchilds(this,'-')" title="移除当前元素">✖</span>
	                    	<span class="dspanExp" style="cursor: pointer;" onclick="resp_newchilds(this,'^')" title="上移元素">▲</span>]
	                    	[<span class="dspanExp" style="cursor: pointer;" onclick="resp_newchilds(this,'-+')" title="在后面增加一个下级元素">↩</span>
	                    	<span class="dspanExp" style="cursor: pointer;" onclick="resp_newchilds(this,'c')" title="复制本级元素与下级元素">❒</span>]
	                    </td>
	                </tr>
                </tbody>
                <tr>
                    <th colspan="4" style="background-color:#FFF; height: 50px;">
                        <span class="cbut" onclick="save_api(true)">+ 保存继续</span>
                        <span class="dbut" onclick="save_api()">+ 保存关闭</span>
                        <span class="ebut" onclick="save_api_esc();">- 取消</span>
                    </th>
                </tr>
            </table>
        </div>
    </div>
    
    <div class="dtrt">
        <span class="dspan">&nbsp;&nbsp;&nbsp;项目列表 >></span>
        <span class="dspan">
            <select id="object_id" onchange="sele_objtab()">
              <option value="">默认项目</option>
            </select>
            <div class="ico_word" title="导出为WORD" onclick="export_file('word')"></div>
            <div class="ico_excl" title="导出为EXCL" onclick="export_file('excl')"></div>
            <div class="ico_html" title="导出为HTML" onclick="export_file('html')"></div>
        </span>
        
        <span class="dspan" style="margin-left: 20%;" id="version_tab">Api 在线编辑工具 V2.0</span>
        
        <span class="dspan" style="float:right">
            <span id="but_addapi" class="dbut" onclick="show_apitab()">+创建接口</span>
            <span id="but_adddom" class="dbut" onclick="show_domtab()">+创建对象</span>
            <span id="but_addobject" class="dbut" onclick="show_objecttab()">+创建项目</span>
        </span>
    </div>
    
    <div class="dtdl">
        <div class="dtr">
            <span class="dspan" name="object_name">项目名称</span><span class="iedit" title="修改项目" onclick="edit_object()"></span><span class="idel" title="删除项目" onclick="del_object()"></span>
            <div style="margin-top:1px;"></div>
            <span class="dspanExp" name="object_exp">项目介绍</span>
            <div style="margin-top:1px;"></div>
            <span class="dspanExp" name="object_host"></span>
            <div style="margin-top:20px;"></div>
            <span class="dspan">接口定义</span>
            <div id="ApiListTbody">
                <span name="api_left_list" id="left_{api_id}" class="dspanName" onclick="api_select('{api_id}')" style="cursor: pointer;"><span class="bg{api_type}"></span>{api_name}&nbsp;&nbsp;<span class="iedit" title="修改接口" onclick="edit_api('{api_id}')"></span><span class="idel" title="删除接口" onclick="del_api('{api_id}')"></span></span>
            </div>
            <div style="margin-top:10px;"></div>
            <span class="dspan">对象定义</span>
        </div>
    </div>
    
    <div class="dtd">
        <div class="dspan" style="font-size:24px;margin-bottom:10px;" name="object_name">项目名称</div>
        <div class="dspan" style="font-size:12px;margin-bottom:5px;" name="object_host">项目主地址</div>
        <div class="dspan" style="font-size:12px;margin-bottom:5px;" name="object_header">全局发送数据</div>
        
        <div id="ApiTabTbody">
            <div class="dtr" api_id="{api_id}">
                <span class="dspan ApiName"><span class="bg{api_type}"></span>{api_name}&nbsp;&nbsp;<span class="iedit" title="修改接口" onclick="edit_api('{api_id}')"></span><span class="idel" title="删除接口" onclick="del_api('{api_id}')"></span></span>
                <div style="height:10px;"></div>
                <span class="dspan ApiURL">{api_url}</span>
                <div style="height:10px;"></div>
                <span class="dspan">{api_exp}</span>
                <div style="height:20px;"></div>
                
                <span class="dspanExp">Header</span>
                <table width="100%" class="eve_table">
                    <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Long</th>
                        <th>Empty</th>
                    </tr>
                    <tbody id="ApiTabTbodyHeader">
                    <tr>
                        <td>{name}</td>
                        <td>{value}</td>
                        <td>{exp}</td>
                        <td>{empty}</td>
                    </tr>
                    </tbody>
                </table>
                
                <span class="dspanExp">Request</span>
                <table width="100%" class="eve_table">
                    <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Long</th>
                        <th>Empty</th>
                    </tr>
                    <tbody id="ApiTabTbodyRequest">
                    <tr>
                        <td>{name}</td>
                        <td>{value}</td>
                        <td>{exp}</td>
                        <td>{empty}</td>
                    </tr>
                    </tbody>
                </table>

                <span class="dspanExp">Response</span>
                <table width="100%" class="eve_table">
                    <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Long</th>
                        <th>Empty</th>
                    </tr>
                    <tbody id="ApiTabTbodyResponse">
                    <tr>
                        <td>{name}</td>
                        <td>{value}</td>
                        <td>{exp}</td>
                        <td>{empty}</td>
                    </tr>
                    </tbody>
                </table>
                
                <div class="dspan ApiJson">
                	<div id="ApiTabTbodyJson">{api_response_json}</div>
                </div>
                
            </div>
        </div>
    </div>
<script language="javascript">
function export_file(Type){
    //离线版不允许操作
    if( !ExistsLine() ){return;}
    
    window.location = "api.php?act=export&oid="+ObjectSeleID+"&type="+Type;
}
function sele_objtab(){
    
    //离线版不允许操作
    if( !ExistsLine() ){return;}
    
    
	SeleID	= $("#object_id").val();
	
	if( SeleID!=undefined ){
	    ObjectSeleID   = SeleID;
	    window.localStorage.setItem("ObjectSeleID",SeleID);
		FunShowObjectInfo(SeleID);
		FunShowApiAll(SeleID);
	}
}
function show_apitab(){
    //离线版不允许操作
    if( !ExistsLine() ){return;}
    
    $("#mask_api").empty();
    $("#mask_api").append( HTMLTPL['MaskApi'] );
    $("#HeadTbody").empty();
    $('#mask').show();
    $('#mask_api').show();
    $("input[name='new_api_id']").val("");
}
function show_objecttab(){
    //离线版不允许操作
    if( !ExistsLine() ){return;}
    
	$('#mask').show();
	$('#mask_object').show();
	
	$("input[name='object_id_new']").val("");
    $("input[name='object_name_new']").val("");
    $("input[name='object_host_new']").val("");
    $("textarea[name='object_exp_new']").val("");
    $("#ObjHeadTbody").empty();
}

function show_domtab(){
    //离线版不允许操作
    if( !ExistsLine() ){return;}
    
	$('#mask').show();
	$('#mask_event').show();
}


function save_api_esc(){
    $("#mask").hide();
    $("#mask_api").hide();
}



function save_api(cont){
    var PostData    = {
        'object_id'     : $("#object_id").val(),
        'api_id'        : $("input[name='new_api_id']").val(),
        'api_name'      : $("input[name='new_apiname']").val(),
        'api_url'       : $("input[name='new_apiurl']").val(),
        'api_type'      : $("select[name='new_apitype']").val(),
        'api_exp'       : $("textarea[name='new_apiexp']").val(),
        'api_header'    : [],
        'api_request'   : [],
        'api_response'  : [],
    };
    if( PostData['object_id']=="" || PostData['object_id']==undefined  ){
        alert('请先选择项目');
        return;
    }
    for(i=0;i<$("input[name='new_apiheader_name']").length;i++){
        var Tmp = 
        PostData['api_header'][i]    = {
            'name':     $("input[name='new_apiheader_name']").eq(i).val(),
            'value':    $("input[name='new_apiheader_value']").eq(i).val(),
            'exp':      $("input[name='new_apiheader_exp']").eq(i).val(),
            'empty':    $("input[name='new_apiheader_empty']").eq(i).get(0).checked,
        }
    }
    for(i=0;i<$("input[name='new_apirequest_name']").length;i++){
        PostData['api_request'][i]    = {
            'name':     $("input[name='new_apirequest_name']").eq(i).val(),
            'value':    $("input[name='new_apirequest_value']").eq(i).val(),
            'exp':      $("input[name='new_apirequest_exp']").eq(i).val(),
            'empty':    $("input[name='new_apirequest_empty']").eq(i).get(0).checked,
        }
    }
    for(i=0;i<$("input[name='new_apiresponse_name']").length;i++){
        PostData['api_response'][i]    = {
        	'left'	:	$("input[name='new_apiresponse_left']").eq(i).val(),
            'name'	:   $("input[name='new_apiresponse_name']").eq(i).val(),
            'value'	:   $("input[name='new_apiresponse_value']").eq(i).val(),
            'exp'	:   $("input[name='new_apiresponse_exp']").eq(i).val(),
        }
    }
    $.post('api.php?act=save_api',{"data":PostData},function(Run){
        if( Run.status==true ){
            if( cont!=true ){
                save_api_esc();
            }
            CallShowApiTr(Run['ApiInfo']);
        }else{
            alert(Run.error);
            return ;
        }
    },"json");
}


function save_object(){
    var PostData    = {
        'object_id'        : $("input[name='object_id_new']").val(),
        'object_name'      : $("input[name='object_name_new']").val(),
        'object_exp'       : $("textarea[name='object_exp_new']").val(),
        'object_host'      : $("input[name='object_host_new']").val(),
        'object_header'    : [],
    };
    for(i=0;i<$("input[name='object_header_name_new']").length;i++){
        PostData['object_header'][i]    = {
            'name'   :    $("input[name='object_header_name_new']").eq(i).val(),
            'value' :    $("input[name='object_header_value_new']").eq(i).val(),
        }
    }
    $.post('api.php?act=save_object',{"data":PostData},function(Run){
        if( Run.status==true&&Run.object_id!="" ){
            $("#ObjHeadTbody").empty();
            esc_object();
            FunShowObjectList(Run.object_id);
        }else{
            alert(Run.error);
        }
    },"json");
}

/**
 * 修改项目显示界面
 */
function edit_object(){
    //离线版不允许操作
    if( !ExistsLine() ){return;}
    
    object_id   = ObjectSeleID;
    if( typeof object_id=="undefined" )return;
    if( ObjectList==undefined||ObjectList==null||ObjectSeleID==false||ObjectSeleID==undefined )return;
    
    var Row = ObjectList[object_id];
    show_objecttab();
    
    $("input[name='object_id_new']").val(object_id);
    $("input[name='object_name_new']").val(Row['object_name']);
    $("input[name='object_host_new']").val(Row['object_host']);
    $("textarea[name='object_exp_new']").val(Row['object_exp']);
    $("#ObjHeadTbody").empty();
    
    if( Row['object_header'].length==undefined ){
        objhead_newtr(Row['object_header']);
    }
}

function del_object(){
    //离线版不允许操作
    if( !ExistsLine() ){return;}
    
    object_id   = ObjectSeleID;
    
    if( typeof object_id=="undefined" )return;
    
    if( confirm('确认删除该项目么?如果删除项目，该项目下的所有接口将被删除!') ){
        $.get("api.php?act=del_object&oid="+object_id,function(Json){
            if( Json['status']!=true ){
                alert(Json['error']);
            }else{
                FunShowObjectList();
                FunShowObjectInfo();
            }
        },'json');
    }
}


/**
 * 显示修改接口界面
 * @param {Object} api_id
 */
function edit_api(api_id){
    //离线版不允许操作
    if( !ExistsLine() ){return;}
    
    
    if( typeof api_id=="undefined" )return;
    
    ObjectId    = $("#object_id").val();
    
    $.get("api.php?act=show_api&oid="+ObjectId+"&api_id="+api_id,function(Json){
        
        if( Json['status']!=true ){
            alert(Json['error']);
            return;
        }
        
        show_apitab();
        $("input[name='new_api_id']").val(api_id);
        
        Row = Json['ApiInfo'];
        
        $("input[name='new_apiname']").val( Row['api_name']);
        $("input[name='new_apiurl']").val( Row['api_url']);
        $("textarea[name='new_apiexp']").text( Row['api_exp']);
        $("select[name='new_apitype']").val( Row['api_type'].toUpperCase() );
        
        $("#HeadTbody").empty();
        $("#RequTbody").empty();
        $("#RespTbody").empty();
        
        
        if( Json['ApiInfo']['api_header']!=undefined && Json['ApiInfo']['api_header'].length>0 ){
            Row = Json['ApiInfo']['api_header'];
            for(i=0;i<Row.length;i++){
                head_newtr(Row[i]);
            }
        }
        if( Json['ApiInfo']['api_request']!=undefined && Json['ApiInfo']['api_request'].length>0 ){
            Row = Json['ApiInfo']['api_request'];
            for(i=0;i<Row.length;i++){
                requ_newtr(Row[i]);
            }
        }
        if( Json['ApiInfo']['api_response']!=undefined && Json['ApiInfo']['api_response'].length>0 ){
            Row = Json['ApiInfo']['api_response'];
            for(i=0;i<Row.length;i++){
                resp_newtr(Row[i]);
            }
        }
        
    },"json");
}

function del_api(api_id){
    //离线版不允许操作
    if( !ExistsLine() ){return;}
    
    ObjectId    = $("#object_id").val();
    if( confirm('确认删除该接口么?') ){
        $.get("api.php?act=del_api&oid="+ObjectId+"&api_id="+api_id,function(Json){
            if( Json['status']!=true ){
                alert(Json['error']);
            }else{
                $("#left_"+api_id).remove();
                $("#ApiTabTbody div[api_id='"+api_id+"']").remove();
            }
        },'json');
    }
}

function esc_object(){
    $("#object_id_new").empty();
    $("#mask_object").hide();
    $("#mask").hide();
}

function api_select(api_id){
    $("span[name='api_left_list']").attr("class","dspanName");
	$("#left_"+api_id).attr("class",'dspanName dspanNames');
	$("html,body").animate({scrollTop:$("div[api_id='"+api_id+"']").offset().top},500);
}

/**
 * 增加一行项目头部参数
 * @param {Object} Row
 */
function objhead_newtr(Row){
    if( $("input[name='object_header_name']").length>5 ){return;}
    
    var TPL     = HTMLTPL['ObjHeadTbody'];
    
    if( typeof Row=="object"&&Row.length==undefined ){
        TPL     = $(HTMLTPL['ObjHeadTbody']);
        
        for(var i in Row){
            if( i!=undefined ) TPL.find("input[name='object_header_name_new']").val(i);
            if( Row[i]!=undefined ) TPL.find("input[name='object_header_value_new']").val(Row[i]);
        }
    }
    $("#ObjHeadTbody").append( TPL );
}
function eve_newtr(){
    $("#EveTbody").append( HTMLTPL['EveTbody'] );
}

/**
 * 增加一个接口头部行信息
 * @param {Object} Row
 */
function head_newtr(Row){
    var TPL     = HTMLTPL['HeadTbody'];
    if( Row!=undefined&&typeof Row['name']!="undefined" ){
        TPL     = $(TPL);
        if( Row['name']!=undefined ) TPL.find("input[name='new_apiheader_name']").val(Row["name"]);
        if( Row['value']!=undefined ) TPL.find("input[name='new_apiheader_value']").val(Row["value"]);
        if( Row['exp']!=undefined ) TPL.find("input[name='new_apiheader_exp']").val(Row["exp"]);
        if( Row['name']!=undefined && Row["empty"]=='true'||Row["empty"]==true ){
            TPL.find("input[name='new_apiheader_empty']").attr("checked",true);
        }else{
            TPL.find("input[name='new_apiheader_empty']").attr("checked",false);
        }
    }
    $("#HeadTbody").append( TPL );
}
function requ_newtr(Row){
    var TPL     = HTMLTPL['RequTbody'];
    if( Row!=undefined&&typeof Row['name']!="undefined" ){
        TPL     = $(TPL);
        if( Row['name']!=undefined ) TPL.find("input[name='new_apirequest_name']").val(Row["name"]);
        if( Row['value']!=undefined ) TPL.find("input[name='new_apirequest_value']").val(Row["value"]);
        if( Row['exp']!=undefined ) TPL.find("input[name='new_apirequest_exp']").val(Row["exp"]);
        if( Row['name']!=undefined && Row["empty"]=='true'||Row["empty"]==true ){
            TPL.find("input[name='new_apirequest_empty']").attr("checked",true);
        }else{
            TPL.find("input[name='new_apirequest_empty']").attr("checked",false);
        }
    }
    $("#RequTbody").append( TPL );
}

function resp_newtr(Row){
    var TPL     = HTMLTPL['RespTbody'];
    if( Row!=undefined&&typeof Row['name']!="undefined" ){
        TPL     = $(TPL);
        if( Row['name']!=undefined ) TPL.find("input[name='new_apiresponse_name']").val(Row["name"]);
        if( Row['value']!=undefined ) TPL.find("input[name='new_apiresponse_value']").val(Row["value"]);
        if( Row['exp']!=undefined ) TPL.find("input[name='new_apiresponse_exp']").val(Row["exp"]);
        
        if( Row['left']!=undefined&&Row['left']!='undefined' ){
        	TPL.find("input[name='new_apiresponse_left']").val(Row['left']);
        	TPL.find("span[name='left_int']").text( Row['left'] );
        }
        
        if( Row['name']!=undefined && Row["empty"]=='true'||Row["empty"]==true ){
            TPL.find("input[name='new_apiresponse_empty']").attr("checked",true);
        }else{
            TPL.find("input[name='new_apiresponse_empty']").attr("checked",false);
        }
        
    }
    $("#RespTbody").append( TPL );
}

function resp_newchilds(Ths,Act){
	var ThsDom  = $(Ths).parent().parent();
	var ThsID	= ThsDom.find("span[name='left_int']").text();
        
	if( Act=="-" ){
		ThsDom.remove();
	}
	if( Act=="+" ){
		var TPL     = $(HTMLTPL['RespTbody']);
		TPL.find("span[name='left_int']").text( ThsID );
		TPL.find("input[name='new_apiresponse_left']").val( ThsID );
		ThsDom.after(TPL);
	}
	if( Act=="-+" ){
		var TPL     = $(HTMLTPL['RespTbody']);
		TPL.find("span[name='left_int']").text( ThsID+'-' );
		TPL.find("input[name='new_apiresponse_left']").val( ThsID+'-' );
		ThsDom.after(TPL);
	}
	//移动到上级
	if( Act=="<" ){
	    ThsID = ThsID.substr(1);
	    ThsDom.find("span[name='left_int']").text( ThsID );
	    ThsDom.find("input[name='new_apiresponse_left']").val( ThsID );
	}
	//移动到下级
	if( Act==">" ){
        ThsID = ThsID+'-';
        ThsDom.find("span[name='left_int']").text( ThsID );
        ThsDom.find("input[name='new_apiresponse_left']").val( ThsID );
    }
	//上下移动
	if( Act=='^' ){
	    var TopDomInp  = ThsDom.prev().find("input");
	    
	    //先添加下级节点
	    var TPLA       = $(HTMLTPL['RespTbody']);
	    ThsID          = $(TopDomInp[0]).val();
        TPLA.find("span[name='left_int']").text( ThsID );
        TPLA.find("input[name='new_apiresponse_left']").val( ThsID );
        for(i=0;i<TopDomInp.length;i++){
            TPLA.find("input").eq(i).val( $(TopDomInp[i]).val() );
        }
        ThsDom.after(TPLA);
        ThsDom.prev().remove();
	}
	
	//复制本级别与下一个级别
	if( Act=='c' ){
	    
	    var NewInp     = [];
	    var Inp        = ThsDom.find("input");
	    var InpRow     = [];
	    for(var i=0;i<Inp.length;i++){
	        InpRow.push( $(Inp[i]).val() );
	    }
	    NewInp.push( InpRow );
	    
	    var NextDom    = ThsDom;
	    for(var i=0;i<500;i++){
	        var NextDom    = NextDom.next();
	        
	        //如果是最后一个元素，则跳出
	        if( NextDom.length<=0||NextDom.html()==undefined )break;
	        
	        NextID         = NextDom.find("span[name='left_int']").text();
	        //如果等级高于当前,则跳出
	        if( NextID.length<=ThsID.length )break;
	        
	        var Inp        = NextDom.find("input");
            var InpRow     = [];
            for(var i=0;i<Inp.length;i++){
                InpRow.push( $(Inp[i]).val() );
            }
            NewInp.push( InpRow );
	    }
	    
	    for(var i=0;i<NewInp.length;i++){
	        NextID     = NewInp[i][0];
	        var TPL    = $(HTMLTPL['RespTbody']);
            TPL.find("span[name='left_int']").text( NextID );
            TPL.find("input[name='new_apiresponse_left']").val( NextID );
            for(var ii=0; ii<NewInp[i].length; ii++){
                TPL.find("input").eq(ii).val( NewInp[i][ii] );
            }
            ThsDom.before(TPL);
	    }
	}
}



/**
 * 显示并刷新项目列表
 * @param {type} ObjId
 * @returns {undefined}
 */
ObjectSeleID    = false;
function FunShowObjectList(ObjId){
    
    seccuss = function(Json){
        $("#object_id").empty();
        var Option              = "";
        var SeleID              = null;
            window.ObjectList   = Json;
        
        if( typeof ObjectList!="object" || ObjectList.length==0 ){
            $("#but_addapi").hide();
            $("#but_adddom").hide();
            show_objecttab();
        }else{
            $("#but_addapi").show();
            $("#but_adddom").show();
            
            for(var i in ObjectList){
                Option += "<option value='"+i+"'>"+ObjectList[i]["object_name"]+"</option>";
                if( SeleID==null || ObjId==i ){
                    SeleID = i;
                }
            }
            $("#object_id").html( Option );
            $("#object_id option[value='"+SeleID+"']").attr("selected",true);

            if( SeleID!=null ){
                FunShowObjectInfo(SeleID);
                window.ObjectSeleID = SeleID;
            }
            
            $("#but_addapi").show();
            $("#but_adddom").show();
        }
    }
    
    if( !ExistsLine() ){
        seccuss(LocalObject);
    }else{
        $.get("api.php?act=show_object",function(Json){
            if( Json['status']!=true ){
                alert('获取失败');
            }else{
                seccuss(Json.object);
            }
        },'json');
    }
}

/**
 * 显示项目基本信息
 * @param {type} SeleID
 * @returns {undefined}
 */
function FunShowObjectInfo(SeleID){
    if( typeof ObjectList=="undefined" )return;
    
    for(var i in ObjectList){
        if( SeleID==i ){
            Dom = ObjectList[i];
            $("[name='object_name']").text( Dom['object_name'] );
            $("[name='object_exp']").text( Dom['object_exp'] );
            $("[name='object_host']").text( Dom['object_host'] );
            $("[name='object_header']").text( JSON.stringify(Dom['object_header']) );
            document.title = Dom['object_name']+"-Adoc自动接口工具";
        }
    }
}

/**
 * 显示一个接口列表
 * @param {Object} ApiRow
 */
function CallShowApiTr(ApiRow){
    
    
    ApiID				= ApiRow['api_id'];
    
    //新增或者修改左侧接口列表
    var TPL 			= HTMLTPL['ApiListTbody'];
	    TPL = TPL.replace(/{api_name}/g,ApiRow['api_name']);
	    TPL = TPL.replace(/{api_type}/g,ApiRow['api_type']);
	    TPL = TPL.replace(/{api_id}/g,  ApiRow['api_id']);
	    
    if( $("#left_"+ApiID).length>0 ){
    	var Dom = $( "#left_"+ApiID );
    	Dom.before(TPL);
    	Dom.remove();
    }else{
	    $("#ApiListTbody").append(TPL);
    }
    
    
    //新增右侧接口列表
    var TPL = HTMLTPL['ApiTabTbody'];
        TPL = TPL.replace('{api_name}',ApiRow['api_name']);
    
    api_url		= ApiRow['api_url'];
    if( api_url.substr(0,7)!="http://" ){
    	api_url	= $("div[name='object_host']").text()+api_url;
    }
    
    TPL = TPL.replace(/{api_url}/g,api_url);
    TPL = TPL.replace(/{api_exp}/g,ApiRow['api_exp']);
    TPL = TPL.replace(/{api_type}/g,ApiRow['api_type']);
    TPL = TPL.replace(/{api_id}/g,ApiRow['api_id']);
    
    var TPLV    = "";
    if( typeof ApiRow['api_header']!="undefined" && ApiRow['api_header'].length>0 ){
        for(ii=0;ii<ApiRow['api_header'].length;ii++){
            var TPLT        = HTMLTPL['ApiTabTbodyHeader'];
            var Row         = ApiRow['api_header'][ii];
            Row['name']     = ( typeof Row['name']=="undefined" )? "" : Row['name'];
            Row['value']    = ( typeof Row['value']=="undefined" )? "" : Row['value'];
            Row['exp']      = ( typeof Row['exp']=="undefined" )? "" : Row['exp'];
            Row['empty']    = ( typeof Row['empty']=="undefined" && (Row['empty']=='true' || Row['empty']==true) )? "true" : "";
            
            TPLT = TPLT.replace("{name}",Row['name']);
            TPLT = TPLT.replace("{value}",Row['value']);
            TPLT = TPLT.replace("{exp}",Row['exp']);
            TPLT = TPLT.replace("{empty}",Row['empty']);
            TPLV += TPLT;
        }
        
    }
    TPL 		= TPL.replace(/{ApiTabTbodyHeader}/,TPLV);
    
    
    var TPLV    = "";
    if( typeof ApiRow['api_request']!="undefined" && ApiRow['api_request'].length>0 ){
        for(ii=0;ii<ApiRow['api_request'].length;ii++){
            var TPLT        = HTMLTPL['ApiTabTbodyRequest'];
            var Row         = ApiRow['api_request'][ii];
            Row['name']     = ( typeof Row['name']=="undefined" )? "" : Row['name'];
            Row['value']    = ( typeof Row['value']=="undefined" )? "" : Row['value'];
            Row['exp']      = ( typeof Row['exp']=="undefined" )? "" : Row['exp'];
            Row['empty']    = ( typeof Row['empty']=="undefined" && (Row['empty']=='true' || Row['empty']==true) )? "true" : "";
            
            TPLT = TPLT.replace("{name}",Row['name']);
            TPLT = TPLT.replace("{value}",Row['value']);
            TPLT = TPLT.replace("{exp}",Row['exp']);
            TPLT = TPLT.replace("{empty}",Row['empty']);
            TPLV += TPLT;
        }
    }
    TPL = TPL.replace(/{ApiTabTbodyRequest}/,TPLV);
    
    var TPLV    = "";
    if( typeof ApiRow['api_response']!="undefined" && ApiRow['api_response'].length>0 ){
        for(ii=0;ii<ApiRow['api_response'].length;ii++){
            var TPLT        = HTMLTPL['ApiTabTbodyResponse'];
            var Row         = ApiRow['api_response'][ii];
            Row['name']     = ( typeof Row['name']=="undefined" )? "" : Row['name'];
            Row['value']    = ( typeof Row['value']=="undefined" )? "" : Row['value'];
            Row['exp']      = ( typeof Row['exp']=="undefined" )? "" : Row['exp'];
            Row['empty']    = ( typeof Row['empty']=="undefined" && (Row['empty']=='true' || Row['empty']==true) )? "true" : "";
            
            TPLT = TPLT.replace("{name}",Row['name']);
            TPLT = TPLT.replace("{value}",Row['value']);
            TPLT = TPLT.replace("{exp}",Row['exp']);
            TPLT = TPLT.replace("{empty}",Row['empty']);
            TPLV += TPLT;
        }
    }
    
    TPL = TPL.replace(/{ApiTabTbodyResponse}/,TPLV);
    
    if( typeof ApiRow['api_response_json']=="object" ){
		var JsonText	= JSON.stringify(ApiRow['api_response_json'],null,4);
			JsonText	= JsonText.replace(/\n/g,"<br>");
			JsonText	= JsonText.replace(/ /g,"&nbsp;&nbsp;");
			
		TPL				= TPL.replace("{api_response_json}", JsonText );
	}
    
    if( $("div[api_id='"+ApiID+"']").length>0 ){
    	var Dom = $("div[api_id='"+ApiID+"']");
    	Dom.before(TPL);
    	Dom.remove();
    }else{
	    $("#ApiTabTbody").append(TPL);
    }
    
}



/**
 * 刷新所有接口
 * @param {type} ObjectId
 * @returns {undefined}
 */
function FunShowApiAll(ObjectId){
    if( typeof ObjectId=="undefined"||ObjectId=="" )return;
    
    $("#ApiListTbody").empty();
    $("#ApiTabTbody").empty();
    
    seccuss = function(Json){
        var ApiDom  = Json;
        for(var i in ApiDom){
            CallShowApiTr(ApiDom[i]);
        }
    }
    
    if( !ExistsLine() ){
        seccuss(LocalApiRow);
    }else{
        $.get("api.php?act=show_api&oid="+ObjectId,function(Json){
            if( Json['status']!=true ){
                alert(Json['error']);
            }else{
                seccuss(Json['data']);
            }
        },'json');
    }
}


/**
 * 是否允许在线操作
 */
var LocalObject = null;
var LocalApiRow = null;

function ExistsLine(){
    if( LocalObject!=null||LocalApiRow!=null ){
        return false;
    }else{
        return true;
    }
}

$(document).ready(function(){
	$("#but_addapi").hide();
    $("#but_adddom").hide();
    
    window.HTMLTPL  = [];
    
    //开始获取要显示的模板
    HTMLTPL['EveTbody']     = $("#EveTbody").html();
    HTMLTPL['MaskApi']      = $("#mask_api").html();
    HTMLTPL['HeadTbody']    = $("#HeadTbody").html();
    HTMLTPL['RequTbody']    = $("#RequTbody").html();
    HTMLTPL['RespTbody']    = $("#RespTbody").html();
    HTMLTPL['ObjHeadTbody'] = $("#ObjHeadTbody").html();
    HTMLTPL['ApiListTbody'] = $("#ApiListTbody").html();
    HTMLTPL['ApiTabTbodyHeader']    = $("#ApiTabTbodyHeader").html();
    HTMLTPL['ApiTabTbodyRequest']   = $("#ApiTabTbodyRequest").html();
    HTMLTPL['ApiTabTbodyResponse']  = $("#ApiTabTbodyResponse").html();
    $("#ApiTabTbodyHeader").html("{ApiTabTbodyHeader}");
    $("#ApiTabTbodyRequest").html("{ApiTabTbodyRequest}");
    $("#ApiTabTbodyResponse").html("{ApiTabTbodyResponse}");
    HTMLTPL['ApiTabTbody']  = $("#ApiTabTbody").html();
    
    $("#ApiListTbody").empty();
    $("#ApiTabTbody").empty();
    
    if( !ExistsLine() ){$("#version_tab").html( $("#version_tab").text()+" -- 离线版,<a href='https://github.com/crabco/phptools'>访问在线版本</a>" );}
    
    var SeleID  = window.localStorage.getItem("ObjectSeleID");
    FunShowObjectList(SeleID);
    
    window.TimeRe   = 0;
    window.TimeDom  = setInterval(function(){
        if( TimeRe>100 ){TimeRe=null;clearInterval(TimeDom);}
        if( typeof ObjectSeleID!="undefined"&&ObjectSeleID!=false ){
            FunShowApiAll(ObjectSeleID);
            clearInterval(TimeDom);
        }
    },100);
    
});
</script>
</body>
</html>
